extends layout

block content
  div.max-w-6xl.mx-auto.p-4
    h1.text-3xl.font-bold.mb-6 Wordle High Scores

    div(class="bg-neutral-700 p-4 rounded-lg mb-6")
      h2(class="text-xl font-semibold mb-3") Filters
      form(method="get" action="/scores")
        div(class="grid grid-cols-1 md:grid-cols-4 gap-4")
          div
            label(class="block mb-1") Sort by
            select(name="sortBy" onchange="this.form.submit()" class="w-full p-2 bg-neutral-600 rounded")
              option(value="date" selected=(filter.sortBy === 'date')) Date
              option(value="guesses" selected=(filter.sortBy === 'guesses')) Guesses
              option(value="duration" selected=(filter.sortBy === 'duration')) Time

          div
            label(class="block mb-1") Order
            select(name="order" onchange="this.form.submit()" class="w-full p-2 bg-neutral-600 rounded")
              option(value="desc" selected=(filter.order === 'desc')) ↓ Descending
              option(value="asc" selected=(filter.order === 'asc')) ↑ Ascending

          div
            label(class="block mb-1") Word Length
            select(name="wordLength" onchange="this.form.submit()" class="w-full p-2 bg-neutral-600 rounded")
              option(value="all" selected=(filter.wordLength === 'all')) All Lengths
              option(value="4" selected=(filter.wordLength === '4')) 4 Letters
              option(value="5" selected=(filter.wordLength === '5')) 5 Letters
              option(value="6" selected=(filter.wordLength === '6')) 6 Letters
              option(value="7" selected=(filter.wordLength === '7')) 7 Letters
              option(value="8" selected=(filter.wordLength === '8')) 8 Letters

          div
            label(class="block mb-1") Letters
            select(name="uniqueLettersOnly" onchange="this.form.submit()" class="w-full p-2 bg-neutral-600 rounded")
              option(value="" selected=(filter.uniqueLettersOnly === undefined)) All Games
              option(value="true" selected=(filter.uniqueLettersOnly === 'true')) Unique Letters Only
              option(value="false" selected=(filter.uniqueLettersOnly === 'false')) With Repeated Letters

    //- Scores table --
    if scores && scores.length > 0
      div(class="overflow-x-auto")
        table(class="w-full bg-neutral-700 rounded-lg overflow-hidden")
          thead
            tr(class="bg-neutral-600")
              th(class="p-3 text-left") Player
              th(class="p-3 text-left") Word
              th(class="p-3 text-left") Guesses
              th(class="p-3 text-left") Time
              th(class="p-3 text-left") Length
              th(class="p-3 text-left") Settings
              th(class="p-3 text-left") Date
          tbody
            each score in scores
              tr(class="border-t border-neutral-600 hover:bg-neutral-600")
                td(class="p-3")= score.playerName
                td(class="p-3 font-mono")= score.targetWord
                td(class="p-3")= score.guesses
                td(class="p-3")= formatTime(score.duration)
                td(class="p-3")= score.wordLength
                td(class="p-3")= score.uniqueLettersOnly ? "Unique Letters" : "Repeats Allowed"
                td(class="p-3")= formatDate(score.date)
    else
      div(class="bg-neutral-700 rounded-lg p-6 text-center")
        p(class="text-xl") No scores found
        p(class="text-gray-400 mt-2") Try adjusting your filters or play some games first!